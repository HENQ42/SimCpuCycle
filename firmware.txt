; === KERNEL ===

INICIO:
    ADD #0      ; NOP
    JUMP INICIO ; Loop infinito

; --- Driver de Teclado (ISR) ---
ORG 500
HANDLER_TECLADO:
    ; Nota: Uma boa ISR deve salvar o ACC antes de usar, 
    ; para não estragar o cálculo do programa principal.
    PUSH        ; Salva o ACC atual na pilha (Stack: [PC, ACC_Antigo])
    
    LOAD 61440  ; Lê Teclado -> ACC
    STORE 100   ; Salva na RAM
    
    POP         ; Recupera o ACC antigo da pilha (Stack: [PC])
    
    RET         ; Pega o PC da pilha e volta para o INICIO