; === SHELL SYSTEM v1.0 ===

; --- Thread Principal ---
INICIO:
    ADD #0      ; NOP
    JUMP INICIO ; Fica aqui para sempre

; --- Driver de Teclado (ISR) ---
ORG 500
HANDLER:
    PUSH        ; Salva contexto

    ; 1. LEITURA
    LOAD 61440  ; Lê do Teclado (0xF000)
    
    ; 2. ECHO (Imprime na tela o que foi digitado)
    ; Escreve no Display (0xE000 = 57344)
    STORE 57344 

    ; 3. VERIFICACAO DE COMANDO ('z')
    ; ASCII de 'z' é 122. Vamos subtrair 122.
    SUB #122    
    
    ; Se o resultado for 0, ativa a ZeroFlag e pula para DESLIGAR
    JEQ DESLIGAR

    ; 4. RETORNO (Se nao foi 'z')
    POP         ; Restaura contexto
    RET         ; Volta ao loop

DESLIGAR:
    ; Se chegou aqui, o usuario apertou 'z'
    HALT